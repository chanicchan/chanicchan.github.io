<!DOCTYPE html>
<html>
<head>
    <title>Join Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; }
        input { font-size: 1.2em; padding: 10px; width: 80%; margin-bottom: 20px; }
        button { font-size: 1.2em; padding: 15px 30px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:disabled { background-color: #ccc; }
    </style>
</head>
<body>
    <h2>Enter your Name</h2>
    <input type="text" id="username" placeholder="Your Name">
    <br>
    <button id="join-btn">Join Game</button>
    <h3 id="status" style="color: green;"></h3>

    <script type="module">
        // 1. Import Firebase (Same versions as Host)
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // 2. Paste the SAME Firebase Config here
const firebaseConfig = {
  apiKey: "AIzaSyDlKJOPmKPTn7kVk9MoFH8YPXkG_177npg",
  authDomain: "multiple-choice-fd175.firebaseapp.com",
  databaseURL: "https://multiple-choice-fd175-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "multiple-choice-fd175",
  storageBucket: "multiple-choice-fd175.firebasestorage.app",
  messagingSenderId: "1035663046842",
  appId: "1:1035663046842:web:7e46c2e92f32a0e797ea83",
  measurementId: "G-JXV0KQYT9R"
};

        // 3. Initialize
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 4. Button Logic
        document.getElementById('join-btn').addEventListener('click', () => {
            const name = document.getElementById('username').value;
            if (!name) return alert("Please enter a name!");

            const playersRef = ref(db, 'games/DEMO1/players');
            const newPlayerRef = push(playersRef); // Create a new unique ID for this player

            set(newPlayerRef, {
                name: name,
                joinedAt: Date.now()
            }).then(() => {
                document.getElementById('status').innerText = "You have joined!";
                document.getElementById('join-btn').disabled = true;
            }).catch((error) => {
                alert("Error: " + error.message);
            });
        });
    </script>
</body>
</html>